@using imediatus.Shared.Enums
<MudDialog>
    <TitleContent>
        <MudText Typo="Typo.h6">
            <MudIcon Icon="@Icons.Material.Filled.AddTask" Class="mr-3 mb-n1" />
            Create a Portfolio
        </MudText>
    </TitleContent>
    <DialogContent>

        <MudGrid>
            <MudItem xs="12" md="12">
                <MudChip T="string" Label="true">To Do</MudChip>
            </MudItem>
            <MudItem xs="12" md="12">
                <MudTextField T="string" Label="Summary" />
            </MudItem>
            <MudItem xs="12" md="4">
                <MudSelectExtended ItemCollection="_classifications" Value="_selectedClassification" ValueChanged="@((PortfolioClassification classification) => OnSelectedClassificationChanged(classification))" ValuePresenter="ValuePresenter.ItemContent" MultiSelection="false" SearchBox="true" SearchBoxAutoFocus="true" SearchBoxClearable="true" Label="Classification" AnchorOrigin="Origin.BottomCenter">
                    <ItemTemplate>
                        <MudStack Class="mud-width-full" Justify="Justify.SpaceBetween">
                            <MudStack Row="true" Justify="Justify.SpaceBetween" AlignItems="AlignItems.Center">
                                <MudStack Row="true">
                                    <MudIcon Icon="@GetClassificationIcon(context.Value ?? PortfolioClassification.Public)" Color="@GetClassificationColor(context.Value ?? PortfolioClassification.Public)" />
                                    <MudText>@context?.Value?.Name</MudText>
                                </MudStack>
                            </MudStack>
                        </MudStack>
                    </ItemTemplate>
                </MudSelectExtended>
            </MudItem>
            <MudItem xs="12" md="4">
                <MudSelectExtended ItemCollection="_priorities" Value="_selectedPriority" ValueChanged="@((PortfolioPriority priority) => OnSelectedPriorityChanged(priority))" ValuePresenter="ValuePresenter.ItemContent" MultiSelection="false" SearchBox="true" SearchBoxAutoFocus="true" SearchBoxClearable="true" Label="Piority" AnchorOrigin="Origin.BottomCenter">
                    <ItemTemplate>
                        <MudStack Class="mud-width-full" Justify="Justify.SpaceBetween">
                            <MudStack Row="true" Justify="Justify.SpaceBetween" AlignItems="AlignItems.Center">
                                <MudStack Row="true">
                                    <MudIcon Icon="@GetPriorityIcon(context.Value ?? PortfolioPriority.Medium)" Color="@GetPriorityColor(context.Value ?? PortfolioPriority.Medium)" />
                                    <MudText>@context?.Value?.Name</MudText>
                                </MudStack>
                            </MudStack>
                        </MudStack>
                    </ItemTemplate>
                </MudSelectExtended>
            </MudItem>
            <MudItem xs="12" md="4">
                <MudSelectExtended ItemCollection="_costCenters" Value="_selectedCostCenter" ValueChanged="@((CostCenterResponse costCenter) => OnSelectedCostCenterChanged(costCenter))" ValuePresenter="ValuePresenter.ItemContent" MultiSelection="false" SearchBox="true" SearchBoxAutoFocus="true" SearchBoxClearable="true" Label="Cost Center" AnchorOrigin="Origin.BottomCenter">
                    <ItemTemplate>
                        <MudStack Class="mud-width-full" Justify="Justify.SpaceBetween">
                            <MudStack Row="true" Justify="Justify.SpaceBetween" AlignItems="AlignItems.Center">
                                <MudStack Row="true">
                                    <MudText>@context?.Value?.Name</MudText>
                                </MudStack>
                            </MudStack>
                        </MudStack>
                    </ItemTemplate>
                </MudSelectExtended>
            </MudItem>
            <MudItem xs="12" md="12">
                <MudSelectExtended ItemCollection="_users" ValuePresenter="ValuePresenter.ItemContent" MultiSelection="false" SearchBox="true" SearchBoxAutoFocus="true" SearchBoxClearable="true" Label="Assignee" AnchorOrigin="Origin.BottomCenter">
                    <ItemTemplate>
                        <MudStack Class="mud-width-full" Justify="Justify.SpaceBetween">
                            <MudText><b>@context.Value?.Item1</b></MudText>
                            <MudStack Row="true" Justify="Justify.SpaceBetween" AlignItems="AlignItems.Center">
                                <MudStack Row="true">
                                    <MudIcon Icon="@Icons.Material.Outlined.Person" />
                                    <MudText>@(context.Value?.Item3 == true ? "Retired" : "Active")</MudText>
                                </MudStack>
                                <MudChip T="string" Color="Color.Info" Variant="Variant.Outlined">Role: @context.Value?.Item2</MudChip>
                            </MudStack>
                        </MudStack>
                    </ItemTemplate>
                </MudSelectExtended>
            </MudItem>
            <MudItem xs="12" md="12">
                @* <FileExplorerManager ContainerId="@Id" IsNewFolder="true" IsUpload="true" IsDownload="true" IsRename="true" IsDelete="true" /> *@
                <MudStack Style="width: 100%">
                    <MudFileUpload T="IReadOnlyList<IBrowserFile>"
                                   @ref="@_fileUpload"
                                   OnFilesChanged="OnInputFileChanged"
                                   AppendMultipleFiles
                                   Hidden="@false"
                                   InputClass="absolute mud-width-full mud-height-full overflow-hidden z-10"
                                   InputStyle="opacity:0"
                                   tabindex="-1"
                                   @ondrop="@ClearDragClass"
                                   @ondragenter="@SetDragClass"
                                   @ondragleave="@ClearDragClass"
                                   @ondragend="@ClearDragClass">
                        <ActivatorContent>
                            <MudPaper Height="300px"
                                      Outlined="true"
                                      Class="@_dragClass">
                                <MudText Typo="Typo.h6">
                                    Drag and drop files here or click
                                </MudText>
                                @foreach (var file in _fileNames)
                                {
                                    <MudChip T="string"
                                             Color="Color.Dark"
                                             Text="@file"
                                             tabindex="-1" />
                                }
                            </MudPaper>
                        </ActivatorContent>
                    </MudFileUpload>
                </MudStack>
            </MudItem>

        </MudGrid>

</DialogContent>
    <DialogActions>
        <MudTooltip Text="Todas as alterações serão perdidas.">
            <MudButton DropShadow="false" Variant="Variant.Filled" StartIcon="@Icons.Material.Filled.Cancel" OnClick="MudDialog.Cancel">
                Cancel
            </MudButton>
        </MudTooltip>
        <MudTooltip Text="Guarda as alterações.">
            <MudButton DropShadow="false" Variant="Variant.Filled" StartIcon="@Icons.Material.Filled.Save" ButtonType="ButtonType.Submit" Color="Color.Success">
                Save
            </MudButton>
        </MudTooltip>
    </DialogActions>
</MudDialog>